let fullWidthMap,focusedMap;$.fn.isInViewport=function(){var e=$(this).offset().top,o=e+$(this).outerHeight(),t=$(window).scrollTop(),a=t+$(window).height();return o>t&&e<a},$(document).ready((function(){const e=new Date("10/23/2022"),o=new Date,t=Math.ceil((e-o)/864e5);let a;t>1?a=`${t} days to go!`:1===t?a="Tomorrow is the big day!":0===t&&(a="Today is the big day!"),a&&(document.getElementById("countdown").innerHTML=a);let n=$("nav").offset().top+$("nav").height();$(window).resize((()=>{n=$("nav").offset().top+$("nav").height()}));const i=$("nav > ol > li > a"),r=$($("section").get().reverse());let l={};r.each((function(){l[$(this).attr("id")]=$("nav > ol > li > a[href=\\#"+$(this).attr("id")+"]")})),$(window).scroll((()=>{const e=$(window).scrollTop(),o=$("nav button.mobile").is(":visible");e>=n&&!o?$("nav").addClass("sticky"):$("nav").removeClass("sticky"),o||r.each((function(){const o=$(this),t=o.offset().top;if(e>=t-150){const e=l[o.attr("id")];return e.hasClass("active")||(i.removeClass("active"),e.addClass("active")),!1}}))})),$("#rsvp-form").on("submit",(function(e){e.preventDefault();var o=$(this).serialize();$("#alert-wrapper").html(alert_markup("info","<strong>Just a sec!</strong> We are saving your details.")),"b0e53b10c1f55ede516b240036b88f40"!==MD5($("#invite_code").val())&&"2ac7f43695eb0479d5846bb38eec59cc"!==MD5($("#invite_code").val())?$("#alert-wrapper").html(alert_markup("danger","<strong>Sorry!</strong> Your invite code is incorrect.")):$.post("https://script.google.com/macros/s/AKfycbzUqz44wOat0DiGjRV1gUnRf4HRqlRARWggjvHKWvqniP7eVDG-/exec",o).done((function(e){console.log(e),"error"===e.result?$("#alert-wrapper").html(alert_markup("danger",e.message)):($("#alert-wrapper").html(""),$("#rsvp-modal").modal("show"))})).fail((function(e){console.log(e),$("#alert-wrapper").html(alert_markup("danger","<strong>Sorry!</strong> There is some issue with the server. "))}))})),$("nav button.mobile").on("click",(function(e){$("nav").toggleClass("expanded"),e.stopPropagation()})),$(window).on("click",(function(){$("nav").removeClass("expanded")}))}));let haveLoadedMarkers=!1,correctMapId="1e81e7338c2717c";function initMaps(){fullWidthMap=new google.maps.Map(document.getElementById("full-width-map"),{center:{lat:40.662502,lng:-73.96976},zoom:14,mapId:correctMapId,disableDoubleClickZoom:!0,disableDefaultUI:!0,fullscreenControl:!1,mapTypeControl:!1,zoomControl:!1,scaleControl:!1,gestureHandling:"cooperative",isFractionalZoomEnabled:!0}),focusedMap=new google.maps.Map(document.getElementById("focused-map"),{center:{lat:40.688692,lng:-73.984075},zoom:15.5,mapId:correctMapId,disableDoubleClickZoom:!0,disableDefaultUI:!0,fullscreenControl:!1,mapTypeControl:!1,zoomControl:!1,scaleControl:!1,gestureHandling:"cooperative",isFractionalZoomEnabled:!0}),$("#focused-map").isInViewport()?initMarkers():$(window).scroll((()=>{!haveLoadedMarkers&&$("#focused-map").isInViewport()&&initMarkers()}))}function initMarkers(){markers.forEach((({name:e,position:{lat:o,lng:t},type:a},n)=>{window.setTimeout((()=>{const n=new mapIcons.Marker({map:focusedMap,title:e,animation:google.maps.Animation.DROP,position:new google.maps.LatLng(o,t),icon:{path:mapIcons.shapes.MAP_PIN,fillColor:"#fffff0",fillOpacity:1,strokeColor:"#000000",strokeWeight:1},map_icon_label:`<span class="map-icon map-icon-${a}"></span>`}),i=new google.maps.InfoWindow({content:e,disableAutoPan:!0}),r=$(`#things-to-do a:contains(${e})`);r.on("mouseover",(()=>{i.open({map:focusedMap,anchor:n,shouldFocus:!1})})),r.on("mouseout",(function(){i.close()})),n.addListener("mouseover",(()=>{r.addClass("marker-highlight"),i.open({map:focusedMap,anchor:n,shouldFocus:!1})})),n.addListener("mouseout",(()=>{r.removeClass("marker-highlight"),i.close()}))}),200*n)})),haveLoadedMarkers=!0}window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&(correctMapId="ed8f84e3fc7b05da"),$("#back-to-top").on("click",(()=>{$(window).scrollTop(0)})),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(e=>{correctMapId=e.matches?"ed8f84e3fc7b05da":"1e81e7338c2717c",initMaps()}));const markers=[{name:"Sunken Harbor Club",position:{lat:40.691455273392506,lng:-73.98789318893117},type:"night-club"},{name:"Circa Brewing Co.",position:{lat:40.69168,lng:-73.986182},type:"bar"},{name:"Alamo Drafthouse",position:{lat:40.69134307854795,lng:-73.98321997543977},type:"movie-theater"},{name:"Fort Greene Park",position:{lat:40.691696103920556,lng:-73.97532678072841},type:"bicycling"},{name:"New York Transit Museum",position:{lat:40.690568558800145,lng:-73.98985656595644},type:"train-station"},{name:"Hilton Brookyln",position:{lat:40.689587,lng:-73.987997},type:"lodging"},{name:"Devoci√≥n",position:{lat:40.688557,lng:-73.983459},type:"cafe"},{name:"Coffee Project",position:{lat:40.68843043640514,lng:-73.97934886309937},type:"cafe"},{name:"Grand Army",position:{lat:40.68824,lng:-73.986538},type:"restaurant"},{name:"Ace Hotel Brookyln",position:{lat:40.687837,lng:-73.983725},type:"lodging"},{name:"Holiday Inn Brooklyn Downtown",position:{lat:40.687496,lng:-73.982682},type:"lodging"},{name:"Blue Bottle Coffee",position:{lat:40.687557477065134,lng:-73.98975447662929},type:"cafe"},{name:"Bacchus",position:{lat:40.687124059833096,lng:-73.98424738707784},type:"restaurant"},{name:"BAM",position:{lat:40.68615201318827,lng:-73.97780054475035},type:"museum"},{name:"Rucola",position:{lat:40.685611,lng:-73.985892},type:"restaurant"},{name:"Leyenda",position:{lat:40.68452465535506,lng:-73.99183620294977},type:"restaurant"}];